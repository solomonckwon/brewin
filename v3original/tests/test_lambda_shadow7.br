func foo(ref f) {
 return f;
}


func main() {
  b = 0;
  f = lambda () { b = b + 1; print(b); };
  f(); /* 1 */
  f(); /* 2 */
  g = foo(f);
  g(); /* 3 */
  g(); /* 4 */
  f(); /* 3, since g was returned, it should be new lamb environment */
  print(b);
}

/*
*OUT*
1
2
3
4
3
0
*OUT*
*/
